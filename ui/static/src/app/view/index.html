<nav class="navbar navbar-inverse">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#"><span class="glyphicon glyphicon-star"></span> Stressfaktor API</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
            <form class="navbar-form navbar-right" role="search">
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="Search..." ng-model="search.keyword">
                    <select class="form-control" ng-model="search.type">
                        <option value="">Anything</option>
                        <optgroup label="Grouped">
                            <option value="Konzert,Soliparty,Party">Gigs and Parties</option>
                            <option value="Film,Film Club,Kino,Filmstube,">Films and Cinema</option>
                        </optgroup>
                        <optgroup label="Individual">
                            <option ng-repeat="et in eventTypes" value="{{et}}">{{et}}</option>
                        </optgroup>
                    </select>
                    <select class="form-control" ng-model="search.period">
                        <option value="yesterday">yesterday</option>
                        <option value="day">today</option>
                        <option value="week">this week</option>
                        <option value="month">this month</option>
                        <option value="all" selected>all</option>
                    </select>
                </div>
            </form>
        </div><!--/.nav-collapse -->
    </div>
</nav>
<div class="container-fluid">
    <div class="row">
        <div class="col-lg-12 col-m-12 col-s-12 col-xs-12">
            <span ng-repeat="(k, event) in events | filter: search.keyword">
                <h3 ng-if="k == 0 || dateToDay(event.date) != dateToDay(events[k-1].date)" class="clearfix">{{event.date | zerotime | caldate}}</h3>
                <div class="panel panel-default" style="margin-bottom: 10px">
                    <div class="panel-body">
                        <h4><span class="glyphicon glyphicon-paperclip" style="font-size: 14px"></span> {{event.type}} at {{event.venue.name}}</h4>
                        <div class="inset-divider"></div>
                        <p>{{event.description}}</p>
                        <table ng-if="event.performer" class="table table-condensed table-bordered">
                            <tr ng-repeat="perf in event.performer">
                                <td>{{perf.name}} <span ng-if="perf.home" class="text-muted">({{perf.home}})</span></td>
                                <td>{{perf.genre}}</td>
                                <td style="width: 24px"><a target="_blank" class="text-primary" ng-if="perf.listen_url" href="{{perf.listen_url}}"><span class="glyphicon glyphicon-headphones" aria-hidden="true"></span></a></td>
                                <td style="width: 24px"><a target="_blank" class="text-primary" href="https://google.com/search?q={{perf.name}} {{perf.home}}"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></a></td>
                            </tr>
                        </table>
                        <div class="inset-divider"></div>
                        <span style="font-family: monospace">{{ event.date | fdate }} <span class="text-muted">(starts {{ event.date | fromnow }} at {{event.venue.address || event.venue.name}})</span></span>
                    </div>
                </div>
            </span>
        </div>
    </div>
</div>
